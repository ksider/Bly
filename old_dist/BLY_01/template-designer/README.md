# Badge Template Designer

Экспериментальный визуальный редактор для построения пользовательских шаблонов бейджей. Запускается локально из каталога `template-designer/index.html`.

## Возможности

- Визуальный холст с drag & drop. Можно перемещать и масштабировать элементы, как в Figma.
- Палитра элементов: текст, поле данных с плейсхолдером `{{field}}`, изображения и декоративные фигуры.
- Панель слоёв для быстрой навигации и управления порядком наложения.
- Настройка параметров элемента: позиции, размеров, цвета, типографики, радиусов и т.д.
- Генерация трёх наборов кода:
  - HTML-разметка.
  - CSS-стили с позиционированием в миллиметрах.
  - Фрагмент manifest JSON с полями шаблона.
- Редактор кода на базе [CodeJar](https://github.com/antonmedv/codejar) с подсветкой HTML/CSS/JSON, автоотступами и автозакрытием скобок.
- Базовая поддержка Emmet-подобных сокращений (например, `div.header>span.title` + Tab).
- Импорт/экспорт в собственный JSON формат конструктора.
- Быстрый доступ к существующим примерам из каталога `templates/*` для изучения разметки и стилей.
- Удаление выбранного элемента клавишей `Delete`.

## Запуск и работа с шаблонами

1. Самый простой способ — поднять локальный сервер из корня проекта:  
   ```bash
   npx serve template-designer
   ```  
   или используйте любой другой статический сервер.
2. Если открыть `index.html` напрямую (`file://`), браузер заблокирует загрузку файлов из каталога `templates`.  
   В этом случае нажмите кнопку «Подключить папку шаблонов» и укажите каталог `templates/` в диалоге File System Access API (поддерживается в Chromium-браузерах). После выдачи разрешения примеры подтянутся без перезапуска.
3. При работе через локальный сервер «Подключить папку шаблонов» не требуется — данные подтягиваются по `fetch`.

## Формат экспорта

Кнопка «Экспорт» сохраняет JSON со следующей структурой:

```jsonc
{
  "badge": { "width": 90, "height": 55 },
  "gridSize": 8,
  "snapToGrid": true,
  "elements": [
    {
      "id": "element-abc123",
      "type": "text",
      "x": 120,
      "y": 24,
      "width": 180,
      "height": 48,
      "rotation": 0,
      "content": "Заголовок"
    }
  ],
  "fields": {
    "name": "Иван Иванов"
  }
}
```

Файл можно загрузить обратно через кнопку «Загрузить».

## Импорт существующих шаблонов

В секции «Примеры» перечислены несколько готовых макетов из каталога проекта. При клике разметка и стили соответствующего шаблона подгружаются в редакторы кода — можно изучить и адаптировать решение.

> При работе из файловой системы обязательно подключите папку `templates/` через кнопку «Подключить папку шаблонов». В противном случае браузер заблокирует чтение файлов.

## План развития

- Обратная синхронизация: преобразование кода в визуальные слои.
- Расширенный импорт из существующих HTML/CSS.
- Точечные правила Emmet и горячие клавиши.
- Предпросмотр с реальными данными участников.
